<!DOCTYPE html>  <html> <head>   <title>core.js</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               core.js             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>                            </td>             <td class="code">               <div class="highlight"><pre><span class="cm">/*globals global */</span></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <p>Welcome to the Blossom test project. This shows how to get a basic Blossom 
application up and running with a minimum of code.  Please be sure to read 
the README so that Blossom is installed correctly via <code>npm</code>, the Node 
Package Manager.  Now, on to the code!</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <p>Every Blossom app needs exactly one instance of <code>SC.Application</code>.  You can 
either use <code>SC.Application</code> as-is, like we do here, or you can customize 
or even subclass it as needed.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">SC</span><span class="p">.</span><span class="nx">Application</span><span class="p">.</span><span class="nx">create</span><span class="p">();</span> <span class="c1">// It automatically assigns itself to `SC.app`.</span></pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <p>You should create a namespace for the classes and global objects defined 
by your application.  In this case, we'll call it <code>MyApp</code>.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="kd">var</span> <span class="nx">MyApp</span><span class="p">;</span>
<span class="nx">MyApp</span> <span class="o">=</span> <span class="nx">global</span><span class="p">.</span><span class="nx">MyApp</span> <span class="o">=</span> <span class="nx">SC</span><span class="p">.</span><span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span>
  <span class="nx">name</span><span class="o">:</span> <span class="s2">&quot;My App&quot;</span>
<span class="p">});</span></pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <p>You'll need to create at least one surface that defines your user 
interface.  In Blossom, "surfaces" are what are visible in the viewport, 
so to draw any user interface widgets into the viewport like buttons and 
checkboxes, you'll need a surface to draw them into and receive events 
from.</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <p>The surface that hosts widgets and layers in Blossom is called 
<code>SC.View</code>. We'll create one and assign it to the <code>ui</code> property inside our 
<code>MyApp</code> namespace.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">MyApp</span><span class="p">.</span><span class="nx">ui</span> <span class="o">=</span> <span class="nx">SC</span><span class="p">.</span><span class="nx">View</span><span class="p">.</span><span class="nx">create</span><span class="p">();</span></pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>               <p>Next you'll want to create a widget you can add to your <code>SC.View</code> surface 
instance. Widgets are a subclass of <code>SC.Layer</code> that provide their own 
behavior and event handling.  In this case, we're creating a custom 
widget.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">MyApp</span><span class="p">.</span><span class="nx">widget</span> <span class="o">=</span> <span class="nx">SC</span><span class="p">.</span><span class="nx">Widget</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span></pre></div>             </td>           </tr>                               <tr id="section-8">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-8">&#182;</a>               </div>               <p>This configures the location and size of our widget within its 
superlayer (or if it has none, it's surface).  Here, we're telling 
Blossom we want a widget that is 500px by 500px, and offset zero pixels 
from the center of its superlayer (or surface, if it doesn't have a 
superlayer).</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nx">layout</span><span class="o">:</span> <span class="p">{</span> <span class="nx">width</span><span class="o">:</span> <span class="mi">500</span><span class="p">,</span> <span class="nx">height</span><span class="o">:</span> <span class="mi">500</span><span class="p">,</span> <span class="nx">centerX</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">centerY</span><span class="o">:</span> <span class="mi">0</span> <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id="section-9">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-9">&#182;</a>               </div>               <p>These methods are automatically be invoked by Blossom when the mouse 
moves over the widget, leaves the widget, or is pressed.</p>

<p>Note: since Blossom is still pre-release, we'll cheat and manipulate 
the <code>document</code> object directly to show a cursor.  In a future 
release of Blossom, this will be replace by a cross-platform 
function that works outside the browser.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nx">mouseDown</span><span class="o">:</span>    <span class="kd">function</span><span class="p">(</span><span class="nx">evt</span><span class="p">)</span> <span class="p">{</span> <span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;You clicked the green widget!&quot;</span><span class="p">);</span> <span class="p">},</span>
  <span class="nx">mouseEntered</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">evt</span><span class="p">)</span> <span class="p">{</span> <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">cursor</span> <span class="o">=</span> <span class="s1">&#39;pointer&#39;</span><span class="p">;</span> <span class="p">},</span>
  <span class="nx">mouseExited</span><span class="o">:</span>  <span class="kd">function</span><span class="p">(</span><span class="nx">evt</span><span class="p">)</span> <span class="p">{</span> <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">cursor</span> <span class="o">=</span> <span class="s1">&#39;default&#39;</span><span class="p">;</span> <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id="section-10">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-10">&#182;</a>               </div>               <p>This method is called when the layer needs to be re-cached, in the 
process of being composited into the <code>SC.View</code> surface. The <code>context</code> 
parameter is a <code>CanvasRenderingContext2D</code> object. See 
http://www.w3.org/TR/2dcontext/ for information on the drawing functions 
that are available.  This API is compatible with all platforms supported 
by Blossom, including the native runtimes.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nx">render</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">ctx</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">ctx</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="s1">&#39;#859900&#39;</span><span class="p">;</span> <span class="c1">// green</span>
    <span class="nx">ctx</span><span class="p">.</span><span class="nx">fillRect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">height</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span></pre></div>             </td>           </tr>                               <tr id="section-11">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-11">&#182;</a>               </div>               <p>The <code>main()</code> function is called by Blossom when your app is ready to begin 
running. You'll want to set your app's <code>ui</code> in this function.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="kd">function</span> <span class="nx">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">ui</span> <span class="o">=</span> <span class="nx">MyApp</span><span class="p">.</span><span class="nx">ui</span><span class="p">,</span>
      <span class="nx">widget</span> <span class="o">=</span> <span class="nx">MyApp</span><span class="p">.</span><span class="nx">widget</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-12">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-12">&#182;</a>               </div>               <p>SC.View initially has no layers, so you'll add your widget to your 
view's layers so it can display itself and receive events.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nx">ui</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;layers&#39;</span><span class="p">).</span><span class="nx">pushObject</span><span class="p">(</span><span class="nx">widget</span><span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-13">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-13">&#182;</a>               </div>               <p>Next, you'll tell <code>SC.app</code> that you want your <code>SC.View</code> surface to 
become the app's user interface ('ui').  Each app has only one active 
<code>ui</code> surface, though you can change it at any time.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nx">SC</span><span class="p">.</span><span class="nx">app</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;ui&#39;</span><span class="p">,</span> <span class="nx">ui</span><span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-14">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-14">&#182;</a>               </div>               <p>You can also add arbitary surfaces to the application using 
<code>SC.app.addSurface(...)</code>, but this is for a more advanced tutorial.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="p">}</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 